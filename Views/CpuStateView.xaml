<UserControl x:Class="Micro.Views.CpuStateView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Micro.Views"
             xmlns:vm="clr-namespace:Micro.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="620" d:DesignWidth="1000"
             d:DataContext="{d:DesignInstance Type=vm:CpuViewModel, IsDesignTimeCreatable=True}">

    <Canvas>


        <Image Source="/Views/interface.png" Width="1000" />

        <UniformGrid Canvas.Left="170" Canvas.Top="75" Rows="4" Columns="4" HorizontalAlignment="Left" VerticalAlignment="Top" Width="389">
            <Label x:Name="AxValueBlock"  Content='{Binding Registers[0].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="AX   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="BxValueBlock"  Content='{Binding Registers[3].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="BX   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="CxValueBlock"  Content='{Binding Registers[1].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="CX   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="DxValueBlock"  Content='{Binding Registers[2].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="DX   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="SpValueBlock"  Content='{Binding Registers[4].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="SP   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="BpValueBlock"  Content='{Binding Registers[5].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="BP   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="SiValueBlock"  Content='{Binding Registers[6].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="SI   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="DiValueBlock"  Content='{Binding Registers[7].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="DI   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="CsValueBlock"  Content='{Binding Registers[8].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="CS   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="DsValueBlock"  Content='{Binding Registers[9].Value,  Converter={StaticResource RegisterLabelConverter}, ConverterParameter="DS   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="SsValueBlock"  Content='{Binding Registers[10].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="SS   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="EsValueBlock"  Content='{Binding Registers[11].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="ES   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="IpValueBlock"  Content='{Binding Registers[12].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="IP   "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="PswValueBlock" Content='{Binding Registers[13].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="PSW  "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="RgkValueBlock" Content='{Binding Registers[14].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RGK  "}' Style="{StaticResource RegisterLabelStyle}" />
            <Label x:Name="RwValueBlock"  Content='{Binding Registers[15].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RW   "}' Style="{StaticResource RegisterLabelStyle}" />
        </UniformGrid>

        <Label x:Name="AramValueBlock"   Content='{Binding Registers[19].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="ARAM "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="34" Canvas.Top="218" Height="22" Width="89" HorizontalAlignment="Left" VerticalAlignment="Center"/>
        <Label x:Name="RgaValueBlock"    Content='{Binding Registers[27].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RGA  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="188" Canvas.Top="202" Height="22" Width="89" HorizontalAlignment="Left" VerticalAlignment="Center"/>
        <Label x:Name="RgbValueBlock"    Content='{Binding Registers[28].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RGB  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="324" Canvas.Top="202" Height="22" Width="89" HorizontalAlignment="Left" VerticalAlignment="Center" RenderTransformOrigin="0.795,-0.214"/>
        <Label x:Name="AluValueBlock"    Content='{Binding Alu,                 Converter={StaticResource RegisterLabelConverter}, ConverterParameter="ALU  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="202" Canvas.Top="333" Height="44" Width="198" HorizontalAlignment="Center" VerticalAlignment="Top"/>
        <Label x:Name="SdaValueBlock"    Content='{Binding Sda,                 Converter={StaticResource RegisterLabelConverter}, ConverterParameter="SDA  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="257" Canvas.Top="414" Height="22" Width="89" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Label x:Name="RgqValueBlock"    Content='{Binding Registers[18].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RGQ  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="422" Canvas.Top="306" Height="22" Width="88" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        <Label x:Name="RgrValueBlock"    Content='{Binding Registers[20].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RGR  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="36" Canvas.Top="301" Height="22" Width="88" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Label x:Name="RgwValueBlock"    Content='{Binding Registers[21].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RGW  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="36" Canvas.Top="370" Height="22" Width="88" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Label x:Name="CmkValueBlock"    Content='{Binding Registers[23].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="CMK  "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="685" Canvas.Top="381" Height="23" Width="89" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Label x:Name="RactValueBlock"   Content='{Binding Registers[22].Value, Converter={StaticResource RegisterLabelConverter}, ConverterParameter="RACT "}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="591" Canvas.Top="57" Height="22" Width="88" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Label x:Name="RgrBinValueBlock" Content='{Binding Registers[14].Value, Converter={StaticResource RgkBinaryConverter}}' Style="{StaticResource RegisterLabelStyle}" Canvas.Left="727" Canvas.Top="432" Height="22" Width="170" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Label Content="Stop" Canvas.Left="885" Canvas.Top="108" >
            <Label.Style>
                <Style TargetType="Label">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding CpuExecutionState}" Value="Stopped">
                            <Setter Property="Foreground" Value="Red"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Label.Style>
        </Label>


        <DataGrid
            IsReadOnly="True"
            Focusable="False"
            IsTabStop="False"
            KeyboardNavigation.TabNavigation="None"
            KeyboardNavigation.ControlTabNavigation="None"
            KeyboardNavigation.IsTabStop="False"
            KeyboardNavigation.DirectionalNavigation="None"
            IsHitTestVisible="False"
            CanUserAddRows="False"
            CanUserDeleteRows="False"
            CanUserReorderColumns="False"
            CanUserResizeColumns="False"
            CanUserResizeRows="False"
            CanUserSortColumns="False"
            AutoGenerateColumns="False"
            FontFamily="Consolas"
            ItemsSource="{Binding FlagRows, UpdateSourceTrigger=PropertyChanged}" Canvas.Left="96" Canvas.Top="416" HorizontalAlignment="Left" VerticalAlignment="Top" >

            <DataGrid.Columns>
                <DataGridTextColumn Header="N" Binding="{Binding Sf}"  />
                <DataGridTextColumn Header="Z" Binding="{Binding Zf}" />
                <DataGridTextColumn Header="V" Binding="{Binding Vf}" />
                <DataGridTextColumn Header="C" Binding="{Binding Cf}" />
                <DataGridTextColumn Header="P" Binding="{Binding Pf}" />
            </DataGrid.Columns>
            <DataGrid.RowStyle>
                <Style TargetType="{x:Type DataGridRow}">
                    <Setter Property="IsSelected" Value="False" />
                    <Setter Property="Header" Value="{Binding Register}" />
                </Style>
            </DataGrid.RowStyle>
        </DataGrid>

        <Button x:Name="RestartButton" Content="Рестарт" Command="{Binding RestartCpuCommand}" Width="113" HorizontalAlignment="Left" ScrollViewer.CanContentScroll="True" VerticalAlignment="Top" Canvas.Left="29" Canvas.Top="524" Height="25">
            <Button.Resources>
                <Style TargetType="Border">
                    <Setter Property="CornerRadius" Value="7"/>
                </Style>
            </Button.Resources>
        </Button>

        <Button x:Name="RunMicroprogrammButton" Command="{Binding RunMicroprogrammCommand}" Width="113" HorizontalAlignment="Left" ScrollViewer.CanContentScroll="True" VerticalAlignment="Top" Canvas.Left="182" Canvas.Top="524" Height="25">
            <Button.Content>
                <StackPanel x:Name="Panel" Orientation="Horizontal">
                    <Image x:Name="RunButtonIcon" Height="15" Width="30">
                        <Image.Style>
                            <Style TargetType="Image">
                                <Style.Triggers>
                                    <!--RUNNING-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="ReadyToStart">
                                        <Setter  Property="Source" Value="{StaticResource IconPlay}"/>
                                    </DataTrigger>
                                    <!--RUNNING-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="Running">
                                        <Setter  Property="Source" Value="{StaticResource IconStop}"/>
                                    </DataTrigger>
                                    <!--NOT RUNNING-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="Stopped">
                                        <Setter Property="Source" Value="{StaticResource IconPlay}"/>
                                    </DataTrigger>
                                    <!--PAUSED-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="Paused">
                                        <Setter Property="Source" Value="{StaticResource IconPlay}"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                    </Image>
                    <TextBlock x:Name="RunButtonText">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Style.Triggers>
                                    <!--RUNNING-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="ReadyToStart">
                                        <Setter Property="Text" Value="Пуск"/>
                                    </DataTrigger>
                                    <!--RUNNING-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="Running">
                                        <Setter Property="Text" Value="Стоп"/>
                                    </DataTrigger>
                                    <!--NOT RUNNING-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="Stopped">
                                        <Setter Property="Text" Value="Пуск"/>
                                    </DataTrigger>
                                    <!--PAUSED-->
                                    <DataTrigger Binding="{Binding CpuExecutionState}" Value="Paused">
                                        <Setter Property="Text" Value="Продолжить"/>
                                    </DataTrigger>

                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <Button x:Name="ExecuteMicrocommandButton" Content="Шаг" Command="{Binding ExecuteMicrocommandCommand}" Width="112" HorizontalAlignment="Left" ScrollViewer.CanContentScroll="True" VerticalAlignment="Top" Canvas.Left="346" Canvas.Top="524" Height="25"/>
        <Button x:Name="ExecuteInstructionButton" Content="Команда" Command="{Binding ExecuteInstructionCommand}" Width="112" HorizontalAlignment="Left" ScrollViewer.CanContentScroll="True" VerticalAlignment="Top" Canvas.Left="346" Canvas.Top="561" Height="25"/>
        <Button x:Name="SaveTraceButton" Content="Сохранить трассу" Command="{Binding SaveTraceCommand}" Width="113" HorizontalAlignment="Left" ScrollViewer.CanContentScroll="True" VerticalAlignment="Top" Canvas.Left="500" Canvas.Top="524" Height="25"/>

    </Canvas>
</UserControl>
